metrics:
  - name: n_active_users
    description: |
      Count of unique users who generated events within the filters.

      Active users are defined by user ID having any captured event in the event logs, including logins and navigating through pages.

      This may be an undercount because:
      - If teachers share their username/password, we will count only one user.
      - Auditing suggests some infrequent user events are not being captured; this is being investigated.
      - If users are given demo accounts (such as over 1K organizations in Sep 25), all of those users will have a single user ID.
      - If users access an application through the application's SSO, we do not track events.    
    type: simple
    type_params:
      measure: n_users
    label: "Active Users"
    meta:
      semantic_model: "sem_events"

  # TAG TO DO redo these using new category types
  # - name: n_users_opened_planner
  #   description: "Count of unique users who opened the planner"
  #   type: simple
  #   type_params:
  #     measure: n_users_with_any_event
  #   filter: |
  #     {{ Dimension('sem_events__is_planner_open_event') }} = true
  #   label: "Users Who Opened Planner"
  #   meta:
  #     semantic_model: "sem_events"

  # - name: n_users_used_weekly_planner
  #   description: "Count of unique users who used the weekly planner"
  #   type: simple
  #   type_params:
  #     measure: n_users_with_any_event
  #   filter: |
  #     {{ Dimension('sem_events__is_weekly_planner_event') }} = true
  #   label: "Users Who Used Weekly Planner"
  #   meta:
  #     semantic_model: "sem_events"

  # - name: n_users_launched_app
  #   description: "Count of unique users who launched an application"
  #   type: simple
  #   type_params:
  #     measure: n_users_with_any_event
  #   filter: |
  #     {{ Dimension('sem_events__is_app_launch_event') }} = true
  #   label: "Users Who Launched Apps"
  #   meta:
  #     semantic_model: "sem_events"

# saved_queries:
#   - name: order_metrics
#     description: Relevant order metrics
#     config:
#       tags:
#         - order_metrics
#     query_params:
#       metrics:
#         - orders
#         - large_order
#         - food_orders
#         - order_total
#       group_by:
#         - Entity('order_id')
#         - TimeDimension('metric_time', 'day')
#         - Dimension('customer__customer_name')
#         - ... # Additional group_by
#       where:
#         - "{{TimeDimension('metric_time')}} > current_timestamp - interval '1 week'"
#         - ... # Additional where clauses
#     exports:
#       - name: order_metrics
#         config:
#           export_as: table # Options available: table, view
#           alias: my_export_alias # Optional - defaults to Export name
#           schema: my_export_schema_name # Optional - defaults to deployment schema