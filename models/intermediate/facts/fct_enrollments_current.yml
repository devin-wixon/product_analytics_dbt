version: 2

models:
  - name: fct_enrollments_current
    description: |
      Purpose: Current active enrollments for users, as of today.
      Granularity: One row per combination of user, role, class, and school.
      Filters: 
      - From its source: Only non-student roles.
    data_tests:
      - dbt_utils.unique_combination_of_columns:
          arguments:
            combination_of_columns:
              - user_id
              - user_role
              - class_id
              - school_id
    columns:
      # source tests for unique enrollment_id
      - name: enrollment_id
