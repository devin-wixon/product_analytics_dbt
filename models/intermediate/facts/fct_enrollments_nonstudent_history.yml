version: 2

models:
  - name: fct_enrollments_nonstudent_history
    description: |
      Purpose: Historical record of all enrollments for non-student users.
      Granularity: One row per dbt snapshot id on the enrollments source model.
      Filters: Only non-student roles (`user_role` != 'student').
    columns:
      # source tests for unique enrollment_id; won't be unique here due to snapshots
      - name: enrollment_id
      - name: user_id
        description: "{{ doc('user_id') }}"
      - name: user_role
        description: "{{ doc('user_role') }}"
      - name: user_role_id
        description: "{{ doc('user_role_id') }}"
      - name: class_id
        description: "{{ doc('class_id') }}"
      - name: school_id
        description: "{{ doc('school_id') }}"
      - name: district_id
        description: "{{ doc('district_id') }}"
      - name: enrollment_start_date
        description: "{{ doc('enrollment_start_date') }}"
      - name: enrollment_end_date
        description: "{{ doc('enrollment_end_date') }}"
      - name: enrollment_updated_at_utc
        description: "{{ doc('updated_at_utc') }}"
      - name: dbt_scd_id
        description: "{{ doc('dbt_scd_id') }}"
      - name: dbt_valid_from
        description: "{{ doc('dbt_valid_from') }}"
      - name: dbt_valid_to
        description: "{{ doc('dbt_valid_to') }}"
      - name: dbt_updated_at
        description: "{{ doc('dbt_updated_at') }}"
      - name: dbt_is_deleted
        description: "{{ doc('dbt_is_deleted') }}"
