version: 2

models:
  - name: rpt_obt_events_dims_daily
    description: |
      Purpose: Aggregated event analytics by dimensions at daily grain for comprehensive reporting and analysis.
      Granularity: One row per unique combination of event dimensions and `client_event_date`.
      Filters: Excludes users with role `student`.
      Notes: Events are grouped by all dimensions to create a summarized view suitable for dashboard reporting. Includes enriched dimensional data from users, districts, programs, resources, and date spine.
    columns:
      - name: user_day_dims_events_sk
        description: "Surrogate key using the minimum event_id for traceability to source events."
        data_tests:
          - unique
          - not_null

      # Event dimension columns
      - name: user_id
        description: "{{ doc('user_id') }}"
        data_tests:
          - not_null
      - name: client_event_date
        description: "{{ doc('client_event_date') }}"
        data_tests:
          - not_null
      - name: event_category
        description: "{{ doc('event_category') }}"
      - name: path_entered
        description: "{{ doc('path_entered') }}"
      - name: path_left
        description: "{{ doc('path_left') }}"
      - name: focus_area_label
        description: ""
      - name: week_number
        description: ""
      - name: program_id
        description: "{{ doc('program_id') }}"
      - name: resource_id
        description: "{{ doc('resource_id') }}"
      - name: application_name
        description: "{{ doc('application_name') }}"

      # User dimension columns (limited subset from user_events_combined)
      - name: user_role
        description: "{{ doc('user_role') }}"
      - name: user_invite_status
        description: "{{ doc('user_invite_status') }}"

      # District dimension columns
      - name: district_id
        description: "{{ doc('district_id') }}"
      - name: district_name
        description: "{{ doc('district_name') }}"
      - name: district_type
        description: "{{ doc('district_type') }}"
      - name: district_state
        description: "{{ doc('district_state') }}"
      - name: district_website_slug
        description: "{{ doc('district_website_slug') }}"
      - name: is_distributed_demo_district
        description: "{{ doc('is_distributed_demo_district') }}"

