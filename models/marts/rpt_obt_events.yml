version: 2

models:
  - name: rpt_obt_events
    description: |
      Purpose: Comprehensive event reporting model combining user events with context for analytics.  
      Granularity: One row per event, uniquely identified by `event_id`.  
      Filters: Excludes student events.
      Notes: Uses the current version of program, resource, and district information rather than the version at the time of the event.  
      User attributes are as of the time of the event.
    columns:
      # Event columns
      - name: event_id
        description: "{{ doc('event_id') }}"
        data_tests:
          - unique
          - not_null
      - name: client_timestamp
        description: "{{ doc('client_timestamp') }}"
      - name: user_id
        description: "{{ doc('user_id') }}"
      - name: event_name
        description: "{{ doc('event_name') }}"
      - name: event_path
        description: "{{ doc('event_path') }}"
      - name: event_value_human_readable
        description: "{{ doc('event_value_human_readable') }}"
      - name: client_event_date
        description: "{{ doc('client_event_date') }}"
      - name: event_category
        description: ""
      - name: path_entered
        description: "{{ doc('path_entered') }}"
      - name: path_left
        description: "{{ doc('path_left') }}"
      - name: focus_area_label
        description: ""
      - name: week_number
        description: ""
      - name: program_id
        description: "{{ doc('program_id') }}"
      - name: resource_id
        description: "{{ doc('resource_id') }}"
      - name: application_name
        description: "{{ doc('application_name') }}"
      - name: is_app_launch_event
        description: "{{ doc('is_app_launch_event') }}"
      - name: is_planner_open_event
        description: "{{ doc('is_planner_open_event') }}"
      - name: is_weekly_planner_event
        description: "{{ doc('is_weekly_planner_event') }}"
        
      # User columns
      - name: user_id
        description: "{{ doc('user_id') }}"
      - name: user_grades
        description: "{{ doc('user_grades') }}"
      - name: user_identifier
        description: "{{ doc('user_identifier') }}"
      - name: user_role
        description: "{{ doc('user_role') }}"
      - name: user_role_id
        description: "{{ doc('user_role_id') }}"
      - name: user_status
        description: "{{ doc('user_status') }}"
      - name: username
        description: "{{ doc('username') }}"
      - name: okta_user_id
        description: "{{ doc('okta_user_id') }}"
      - name: class_id
        description: "{{ doc('class_id') }}"
      - name: class_sourced_id
        description: "{{ doc('class_sourced_id') }}"
      - name: school_id
        description: "{{ doc('school_id') }}"
      - name: school_sourced_id
        description: "{{ doc('school_sourced_id') }}"
      - name: user_email_sent_utc
        description: "{{ doc('email_sent_utc') }}"
      - name: user_updated_at_utc
        description: "{{ doc('updated_at_utc') }}"
      - name: user_other_grades
        description: "{{ doc('user_other_grades') }}"
      - name: user_invite_status
        description: "{{ doc('user_invite_status') }}"
      - name: override_district_auth

      # District columns
      - name: district_id
        description: "{{ doc('district_id') }}"
      - name: district_name
        description: "{{ doc('district_name') }}"
      - name: district_state
        description: "{{ doc('district_state') }}"
      - name: district_type
        description: "{{ doc('district_type') }}"
      - name: district_website_slug
        description: "{{ doc('district_website_slug') }}"
      - name: is_distributed_demo_district
        description: "{{ doc('is_distributed_demo_district') }}"

